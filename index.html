<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>칭다오 2박 3일 여행 일정</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Google Maps API -->
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB-zo0WEMahNUf29Oz4qBb73jtCfoDkwd4&callback=initMap" async defer></script>

    <!-- FontAwesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700;900&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 50%, #f0f9ff 100%);
        }

        #map {
            height: 100%;
            width: 100%;
            border-radius: 1rem;
        }

        .map-wrapper {
            height: 550px;
            position: relative;
            background: white;
            border-radius: 1.25rem;
            overflow: hidden;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08);
        }

        .time-badge {
            background: linear-gradient(135deg, #e5e7eb, #f3f4f6);
            color: #374151;
            font-weight: 700;
            font-size: 0.7rem;
            padding: 4px 10px;
            border-radius: 6px;
            display: inline-block;
            letter-spacing: 0.5px;
        }

        .time-badge.highlight {
            background: linear-gradient(135deg, #fbbf24, #f59e0b);
            color: #78350f;
            box-shadow: 0 2px 8px rgba(251, 191, 36, 0.3);
        }

        .timeline-line {
            position: absolute;
            left: 19px;
            top: 20px;
            bottom: 20px;
            width: 3px;
            background: linear-gradient(180deg, #0d9488, #14b8a6, #0d9488);
            border-radius: 3px;
            z-index: 0;
        }

        .btn-day {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .btn-day::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.5s;
        }

        .btn-day:hover::before {
            left: 100%;
        }

        .btn-day.active {
            background: linear-gradient(135deg, #0d9488, #14b8a6);
            color: white;
            border-color: #0d9488;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(13, 148, 136, 0.3);
        }

        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }

        .custom-scrollbar::-webkit-scrollbar-track {
            background: #f1f5f9;
            border-radius: 10px;
        }

        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #0d9488, #14b8a6);
            border-radius: 10px;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .animate-fade-in-up {
            animation: fadeInUp 0.5s ease-out forwards;
        }

        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.8;
            }
        }

        .legend-badge {
            backdrop-filter: blur(12px);
            transition: all 0.2s;
        }

        .legend-badge:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
    </style>
</head>
<body class="flex flex-col min-h-screen text-gray-800">

    <!-- Header -->
    <header class="bg-gradient-to-r from-teal-600 via-cyan-600 to-blue-600 shadow-lg sticky top-0 z-[1001]">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-20">
                <div class="flex items-center gap-4">
                    <div class="w-12 h-12 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center">
                        <i class="fas fa-map-marked-alt text-white text-2xl"></i>
                    </div>
                    <div>
                        <h1 class="font-black text-2xl text-white leading-tight">칭다오 여행</h1>
                        <p class="text-xs text-cyan-100 font-medium mt-0.5">
                            <i class="fas fa-hotel mr-1"></i>MGM 호텔
                            <span class="mx-2">•</span>
                            <i class="fas fa-subway mr-1"></i>대중교통
                            <span class="mx-2">•</span>
                            <i class="fas fa-calendar-alt mr-1"></i>2박 3일
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <main class="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full space-y-6">

        <!-- Day Selector -->
        <div class="grid grid-cols-3 gap-3">
            <button onclick="updateDay(1)" id="btn-1" class="btn-day active px-6 py-4 rounded-2xl border-2 border-gray-200 bg-white font-bold shadow-lg text-center">
                <div class="text-lg mb-1">Day 1</div>
                <div class="text-xs font-normal text-gray-600">맥주박물관 & 구시가지</div>
            </button>
            <button onclick="updateDay(2)" id="btn-2" class="btn-day px-6 py-4 rounded-2xl border-2 border-gray-200 bg-white font-bold shadow-lg text-center">
                <div class="text-lg mb-1">Day 2</div>
                <div class="text-xs font-normal text-gray-600">해변 산책 & 해피아워</div>
            </button>
            <button onclick="updateDay(3)" id="btn-3" class="btn-day px-6 py-4 rounded-2xl border-2 border-gray-200 bg-white font-bold shadow-lg text-center">
                <div class="text-lg mb-1">Day 3</div>
                <div class="text-xs font-normal text-gray-600">쇼핑 & 귀국</div>
            </button>
        </div>

        <!-- Main Content -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">

            <!-- Map Section -->
            <div class="lg:col-span-2 space-y-4">
                <div class="map-wrapper">
                    <div id="map"></div>
                    <div class="absolute top-4 right-4 z-[500] bg-white/95 backdrop-blur-md p-4 rounded-xl shadow-lg border border-gray-200 text-xs">
                        <div class="font-bold mb-3 text-gray-800 flex items-center gap-2">
                            <i class="fas fa-subway text-teal-600"></i>
                            지하철 노선
                        </div>
                        <div class="space-y-2">
                            <div class="flex items-center"><span class="w-10 h-1.5 bg-pink-500 mr-2 rounded"></span><span class="text-gray-700">8호선 (공항)</span></div>
                            <div class="flex items-center"><span class="w-10 h-1.5 bg-yellow-500 mr-2 rounded"></span><span class="text-gray-700">1호선 (시내)</span></div>
                            <div class="flex items-center"><span class="w-10 h-1.5 bg-red-500 mr-2 rounded"></span><span class="text-gray-700">2호선 (호텔)</span></div>
                            <div class="flex items-center"><span class="w-10 h-1.5 bg-green-600 mr-2 rounded"></span><span class="text-gray-700">3호선 (구시가)</span></div>
                        </div>
                    </div>
                </div>

                <!-- Selected Place Info -->
                <div id="place-info" class="bg-gradient-to-br from-white to-blue-50 p-6 rounded-2xl shadow-lg border-2 border-blue-100 text-sm hidden animate-fade-in-up">
                    <div class="flex items-start justify-between mb-4">
                        <div class="flex items-center gap-4">
                            <div id="place-icon" class="w-14 h-14 rounded-2xl flex items-center justify-center text-white text-2xl shadow-lg"></div>
                            <div>
                                <h3 id="place-title" class="font-bold text-xl text-gray-900 mb-1"></h3>
                                <p id="place-coords" class="text-xs text-gray-500"></p>
                            </div>
                        </div>
                        <button onclick="closePlaceInfo()" class="text-gray-400 hover:text-gray-600 transition p-2">
                            <i class="fas fa-times text-lg"></i>
                        </button>
                    </div>
                    <a id="place-link" href="#" target="_blank" class="inline-flex items-center gap-2 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white px-5 py-3 rounded-xl text-sm font-bold transition shadow-md hover:shadow-lg">
                        <i class="fas fa-external-link-alt"></i>
                        구글 맵에서 보기
                    </a>
                </div>

                <!-- Info Card -->
                <div id="info-card" class="bg-gradient-to-br from-teal-50 to-cyan-50 p-6 rounded-2xl shadow-lg border border-teal-100 text-sm">
                    <!-- JS Injected -->
                </div>
            </div>

            <!-- Timeline Section -->
            <div class="lg:col-span-1">
                <div class="bg-white rounded-2xl shadow-lg border border-gray-200 h-full flex flex-col" style="max-height: 750px;">
                    <div class="p-6 bg-gradient-to-r from-teal-50 to-cyan-50 border-b border-gray-200 rounded-t-2xl">
                        <div class="flex items-center gap-3 mb-2">
                            <div class="w-10 h-10 bg-gradient-to-br from-teal-500 to-cyan-500 rounded-xl flex items-center justify-center">
                                <i class="fas fa-calendar-check text-white"></i>
                            </div>
                            <h3 id="day-title" class="text-2xl font-black text-gray-900">Day 1 일정</h3>
                        </div>
                        <p class="text-xs text-gray-500 ml-13">상세 스케줄을 클릭하면 지도에서 확인할 수 있습니다</p>
                    </div>
                    <div id="timeline" class="p-6 overflow-y-auto flex-grow relative custom-scrollbar">
                        <!-- JS Injected -->
                    </div>
                </div>
            </div>

        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-white border-t border-gray-200 mt-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
            <div class="text-center">
                <p class="text-sm text-gray-500">
                    <i class="fas fa-plane-departure text-teal-600 mr-2"></i>
                    칭다오 2박 3일 여행 일정표
                </p>
                <p class="text-xs text-gray-400 mt-2">
                    <i class="fas fa-info-circle mr-1"></i>
                    지도 마커를 클릭하거나 일정을 클릭하면 구글 맵에서 상세 정보를 확인할 수 있습니다
                </p>
            </div>
        </div>
    </footer>

    <script>
        // --- DATA ---
        const LOCS = {
            airport: {
                lat: 36.3661, lng: 120.0874,
                title: "칭다오 공항",
                searchName: "Qingdao Liuting International Airport"
            },
            beerMuseum: {
                lat: 36.0790, lng: 120.3420,
                title: "칭다오 맥주박물관",
                searchName: "Tsingtao Beer Museum Qingdao"
            },
            signalHill: {
                lat: 36.0664, lng: 120.3266,
                title: "신호산 공원",
                searchName: "Xinhao Hill Park Qingdao"
            },
            xiaoyushan: {
                lat: 36.0587, lng: 120.3313,
                title: "샤오위산 공원",
                searchName: "Xiaoyushan Park Qingdao"
            },
            zhanqiao: {
                lat: 36.0590, lng: 120.3168,
                title: "잔교",
                searchName: "Zhanqiao Pier Qingdao"
            },
            cathedral: {
                lat: 36.0672, lng: 120.3218,
                title: "천주교당",
                searchName: "St. Michael's Cathedral Qingdao"
            },
            taidong: {
                lat: 36.0832, lng: 120.3672,
                title: "타이동 야시장",
                searchName: "Taidong Pedestrian Street Qingdao"
            },
            hotel: {
                lat: 36.0957, lng: 120.4646,
                title: "MGM 호텔",
                searchName: "MGM Qingdao Hotel"
            },
            shilaoren_beach: {
                lat: 36.0919, lng: 120.4650,
                title: "석노인 해수욕장",
                searchName: "Shilaoren Beach Qingdao"
            },
            polar_ocean: {
                lat: 36.0850, lng: 120.4580,
                title: "극지해양세계",
                searchName: "Qingdao Polar Ocean World"
            },
            mixc: {
                lat: 36.0675, lng: 120.3875,
                title: "MIXC 쇼핑센터",
                searchName: "MixC Qingdao Shopping Mall"
            },
            may4: {
                lat: 36.0625, lng: 120.3845,
                title: "5.4 광장",
                searchName: "May Fourth Square Qingdao"
            }
        };

        const DAYS = {
            1: {
                title: "Day 1: 맥주박물관 & 구시가지",
                info: "공항 도착 후 지하철로 맥주박물관을 관람하고 구시가지를 둘러본 뒤 호텔에 체크인합니다. 저녁은 타이동 야시장에서 즐깁니다.",
                markers: [LOCS.airport, LOCS.beerMuseum, LOCS.signalHill, LOCS.cathedral, LOCS.zhanqiao, LOCS.hotel, LOCS.taidong],
                lines: [
                    { path: [LOCS.airport, LOCS.beerMuseum], color: '#EC4899' },
                    { path: [LOCS.beerMuseum, LOCS.signalHill], color: '#10B981' },
                    { path: [LOCS.signalHill, LOCS.cathedral], color: '#10B981' },
                    { path: [LOCS.cathedral, LOCS.zhanqiao], color: '#10B981' },
                    { path: [LOCS.zhanqiao, LOCS.hotel], color: '#EF4444' },
                    { path: [LOCS.hotel, LOCS.taidong], color: '#10B981' }
                ],
                center: { lat: 36.15, lng: 120.35 },
                zoom: 11,
                timeline: [
                    { time: "09:20", title: "칭다오 공항 도착", highlight: true, icon: "fa-plane-arrival", desc: "입국 수속 후 지하철 8호선 탑승", location: "airport" },
                    { time: "11:00", title: "짐 보관 후 맥주박물관 이동", highlight: false, icon: "fa-subway", desc: "2호선 리촌루역 하차 후 도보 10분", location: "beerMuseum" },
                    { time: "11:30", title: "칭다오 맥주박물관 관람", highlight: false, icon: "fa-beer", desc: "생맥주 시음 포함 약 2시간 관람", location: "beerMuseum" },
                    { time: "13:30", title: "점심 식사 (맥주거리)", highlight: false, icon: "fa-utensils", desc: "박물관 앞 식당가에서 현지식", location: "beerMuseum" },
                    { time: "14:30", title: "신호산 공원", highlight: false, icon: "fa-mountain", desc: "도보 15분, 칭다오 시내 전망 약 1시간", location: "signalHill" },
                    { time: "15:30", title: "천주교당", highlight: false, icon: "fa-church", desc: "도보 10분, 성 미카엘 대성당 약 30분", location: "cathedral" },
                    { time: "16:00", title: "잔교 산책", highlight: false, icon: "fa-water", desc: "도보 15분, 칭다오 맥주 라벨 배경 약 1시간", location: "zhanqiao" },
                    { time: "17:00", title: "MGM 호텔 체크인", highlight: true, icon: "fa-hotel", desc: "지하철 1호선 → 11호선 (단주마루역)", location: "hotel" },
                    { time: "18:30", title: "타이동 야시장", highlight: false, icon: "fa-shopping-bag", desc: "지하철 11호선 → 3호선. 저녁식사 & 쇼핑", location: "taidong" },
                    { time: "21:00", title: "호텔 복귀", highlight: false, icon: "fa-bed", desc: "지하철로 호텔 복귀 후 휴식", location: "hotel" }
                ]
            },
            2: {
                title: "Day 2: 해변 산책 & 해피아워",
                info: "호텔에서 가까운 석노인 해수욕장과 극지해양세계를 방문합니다. 오후 5시 30분 해피아워에 맞춰 호텔로 복귀하는 것이 핵심입니다.",
                markers: [LOCS.hotel, LOCS.shilaoren_beach, LOCS.polar_ocean],
                lines: [
                    { path: [LOCS.hotel, LOCS.shilaoren_beach], color: '#3B82F6' },
                    { path: [LOCS.shilaoren_beach, LOCS.polar_ocean], color: '#3B82F6' },
                    { path: [LOCS.polar_ocean, LOCS.hotel], color: '#3B82F6' }
                ],
                center: { lat: 36.075, lng: 120.440 },
                zoom: 13,
                timeline: [
                    { time: "07:00", title: "조식 (MGM)", highlight: false, icon: "fa-coffee", desc: "오션뷰 레스토랑에서 든든한 아침", location: "hotel" },
                    { time: "09:00", title: "석노인 해수욕장 산책", highlight: false, icon: "fa-umbrella-beach", desc: "호텔에서 도보 또는 택시 10분. 3km 해안 산책로", location: "shilaoren_beach" },
                    { time: "11:00", title: "극지해양세계", highlight: false, icon: "fa-fish", desc: "해수욕장에서 도보 15분. 수족관 & 해양동물 공연", location: "polar_ocean" },
                    { time: "13:00", title: "점심 (해변 레스토랑)", highlight: false, icon: "fa-utensils", desc: "해변가 레스토랑에서 해산물 요리", location: "polar_ocean" },
                    { time: "14:30", title: "호텔로 복귀", highlight: false, icon: "fa-hotel", desc: "택시 또는 도보로 호텔 복귀", location: "hotel" },
                    { time: "15:00", title: "호텔 수영장/사우나", highlight: false, icon: "fa-swimming-pool", desc: "인피니티 풀과 사우나 이용", location: "hotel" },
                    { time: "17:30", title: "해피아워 (Happy Hour)", highlight: true, icon: "fa-cocktail", desc: "19:00까지 주류와 음식 무제한. 저녁 식사 해결", location: "hotel" },
                    { time: "19:30", title: "5.4 광장 야경 (선택)", highlight: false, icon: "fa-building", desc: "지하철로 5.4광장 야경 관람 또는 호텔 휴식", location: "may4" },
                    { time: "21:00", title: "호텔 휴식", highlight: false, icon: "fa-bed", desc: "편안한 휴식", location: "hotel" }
                ]
            },
            3: {
                title: "Day 3: 조식 & 쇼핑 & 귀국",
                info: "호텔 조식을 여유롭게 즐기고 체크아웃 전 MIXC 쇼핑몰에서 쇼핑합니다. 14:00 체크아웃 후 공항으로 이동합니다.",
                markers: [LOCS.hotel, LOCS.mixc, LOCS.airport],
                lines: [
                    { path: [LOCS.hotel, LOCS.mixc], color: '#EF4444' },
                    { path: [LOCS.mixc, LOCS.hotel], color: '#EF4444' },
                    { path: [LOCS.hotel, LOCS.airport], color: '#EC4899' }
                ],
                center: { lat: 36.20, lng: 120.30 },
                zoom: 11,
                timeline: [
                    { time: "07:00", title: "기상 & MGM 조식 뷔페", highlight: true, icon: "fa-utensils", desc: "여유롭게 즐기는 마지막 호텔 조식", location: "hotel" },
                    { time: "09:00", title: "짐 정리 & 체크아웃 준비", highlight: false, icon: "fa-suitcase", desc: "쇼핑 전 짐 정리", location: "hotel" },
                    { time: "10:30", title: "MIXC 쇼핑센터", highlight: false, icon: "fa-shopping-bag", desc: "2호선 5.4광장역 하차. 기념품 구매", location: "mixc" },
                    { time: "13:00", title: "호텔 복귀", highlight: false, icon: "fa-subway", desc: "쇼핑한 물건 들고 호텔로", location: "hotel" },
                    { time: "14:00", title: "체크아웃", highlight: true, icon: "fa-suitcase", desc: "호텔 체크아웃", location: "hotel" },
                    { time: "14:30", title: "공항으로 출발", highlight: true, icon: "fa-subway", desc: "지하철 11호선 → 8호선 (약 90분)", location: "hotel" },
                    { time: "16:10", title: "공항 도착", highlight: false, icon: "fa-check-circle", desc: "비행기 출발 2시간 전 도착", location: "airport" },
                    { time: "18:10", title: "귀국행 비행기", highlight: true, icon: "fa-plane-departure", desc: "칭다오 출발", location: "airport" }
                ]
            }
        };

        // --- MAP LOGIC ---
        let map;
        let markers = [];
        let polylines = [];

        function initMap() {
            map = new google.maps.Map(document.getElementById('map'), {
                center: { lat: LOCS.hotel.lat, lng: LOCS.hotel.lng },
                zoom: 12,
                mapTypeControl: true,
                streetViewControl: false,
                fullscreenControl: true,
                styles: [
                    {
                        featureType: 'water',
                        elementType: 'geometry',
                        stylers: [{ color: '#e0f2fe' }]
                    },
                    {
                        featureType: 'landscape',
                        elementType: 'geometry',
                        stylers: [{ color: '#f8fafc' }]
                    }
                ]
            });
            updateDay(1);
        }

        function clearMapElements() {
            markers.forEach(marker => marker.setMap(null));
            polylines.forEach(polyline => polyline.setMap(null));
            markers = [];
            polylines = [];
        }

        function showPlaceInfo(loc, color, index) {
            const placeInfo = document.getElementById('place-info');
            const placeIcon = document.getElementById('place-icon');
            const placeTitle = document.getElementById('place-title');
            const placeCoords = document.getElementById('place-coords');
            const placeLink = document.getElementById('place-link');

            // Get icon based on location type
            let icon = 'fa-map-marker-alt';
            if (loc.title.includes('공항')) icon = 'fa-plane';
            if (loc.title.includes('호텔') || loc.title.includes('MGM')) icon = 'fa-hotel';
            if (loc.title.includes('맥주')) icon = 'fa-beer';
            if (loc.title.includes('해수욕장') || loc.title.includes('잔교')) icon = 'fa-umbrella-beach';
            if (loc.title.includes('해양')) icon = 'fa-fish';
            if (loc.title.includes('쇼핑') || loc.title.includes('MIXC') || loc.title.includes('타이동')) icon = 'fa-shopping-bag';
            if (loc.title.includes('신호산') || loc.title.includes('샤오위산')) icon = 'fa-mountain';
            if (loc.title.includes('교당')) icon = 'fa-church';
            if (loc.title.includes('광장')) icon = 'fa-building';

            // Update place info panel
            placeIcon.style.background = `linear-gradient(135deg, ${color}, ${adjustBrightness(color, 20)})`;
            placeIcon.innerHTML = `<i class="fas ${icon}"></i>`;
            placeTitle.textContent = loc.title;
            placeCoords.textContent = loc.searchName;
            placeLink.href = `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(loc.searchName)}`;

            // Show panel with animation
            placeInfo.classList.remove('hidden');
            setTimeout(() => {
                placeInfo.style.opacity = '0';
                placeInfo.style.transform = 'translateY(20px)';
                placeInfo.style.transition = 'all 0.4s cubic-bezier(0.4, 0, 0.2, 1)';
                setTimeout(() => {
                    placeInfo.style.opacity = '1';
                    placeInfo.style.transform = 'translateY(0)';
                }, 10);
            }, 10);
        }

        function adjustBrightness(color, percent) {
            const num = parseInt(color.replace('#', ''), 16);
            const amt = Math.round(2.55 * percent);
            const R = (num >> 16) + amt;
            const G = (num >> 8 & 0x00FF) + amt;
            const B = (num & 0x0000FF) + amt;
            return '#' + (0x1000000 + (R < 255 ? R < 1 ? 0 : R : 255) * 0x10000 +
                (G < 255 ? G < 1 ? 0 : G : 255) * 0x100 +
                (B < 255 ? B < 1 ? 0 : B : 255))
                .toString(16).slice(1);
        }

        function closePlaceInfo() {
            const placeInfo = document.getElementById('place-info');
            placeInfo.style.opacity = '0';
            placeInfo.style.transform = 'translateY(20px)';
            setTimeout(() => {
                placeInfo.classList.add('hidden');
            }, 300);
        }

        function updateDay(day) {
            const data = DAYS[day];

            // UI Updates
            document.querySelectorAll('.btn-day').forEach(b => b.classList.remove('active'));
            document.getElementById(`btn-${day}`).classList.add('active');
            document.getElementById('day-title').textContent = `Day ${day} 일정`;
            document.getElementById('info-card').innerHTML = `
                <div class="flex items-start gap-3">
                    <div class="flex-shrink-0 w-10 h-10 bg-gradient-to-br from-teal-500 to-cyan-500 rounded-xl flex items-center justify-center">
                        <i class="fas fa-info-circle text-white"></i>
                    </div>
                    <div>
                        <p class="font-bold text-teal-900 text-base mb-1">Day ${day} 여행 전략</p>
                        <p class="text-teal-700 leading-relaxed">${data.info}</p>
                    </div>
                </div>
            `;

            // Close place info panel
            const placeInfo = document.getElementById('place-info');
            if (placeInfo && !placeInfo.classList.contains('hidden')) {
                closePlaceInfo();
            }

            // Clear existing map elements
            clearMapElements();

            // Draw polylines (routes)
            if(data.lines) {
                data.lines.forEach(line => {
                    const polyline = new google.maps.Polyline({
                        path: line.path.map(p => ({ lat: p.lat, lng: p.lng })),
                        geodesic: true,
                        strokeColor: line.color,
                        strokeOpacity: 0.8,
                        strokeWeight: 6,
                        map: map
                    });
                    polylines.push(polyline);
                });
            }

            // Add markers
            data.markers.forEach((loc, index) => {
                let color = '#0F766E';
                if (loc.title.includes('공항')) color = '#DB2777';
                if (loc.title.includes('호텔') || loc.title.includes('MGM')) color = '#059669';
                if (loc.title.includes('맥주')) color = '#D97706';
                if (loc.title.includes('해수욕장') || loc.title.includes('잔교')) color = '#3B82F6';
                if (loc.title.includes('해양')) color = '#06B6D4';
                if (loc.title.includes('쇼핑') || loc.title.includes('MIXC') || loc.title.includes('타이동')) color = '#8B5CF6';
                if (loc.title.includes('신호산') || loc.title.includes('샤오위산')) color = '#10B981';
                if (loc.title.includes('교당')) color = '#F59E0B';
                if (loc.title.includes('광장')) color = '#EF4444';

                const marker = new google.maps.Marker({
                    position: { lat: loc.lat, lng: loc.lng },
                    map: map,
                    title: loc.title,
                    label: {
                        text: String(index + 1),
                        color: 'white',
                        fontSize: '14px',
                        fontWeight: 'bold'
                    },
                    icon: {
                        path: google.maps.SymbolPath.CIRCLE,
                        fillColor: color,
                        fillOpacity: 1,
                        strokeColor: 'white',
                        strokeWeight: 4,
                        scale: 18
                    },
                    animation: google.maps.Animation.DROP
                });

                const googleMapsUrl = `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(loc.searchName)}`;

                const infoWindow = new google.maps.InfoWindow({
                    content: `<div style="padding: 16px; font-family: 'Noto Sans KR', sans-serif; min-width: 240px;">
                        <div style="font-weight: 900; font-size: 16px; margin-bottom: 8px; color: #1e293b;">${loc.title}</div>
                        <div style="font-size: 12px; color: #64748b; margin-bottom: 12px; line-height: 1.4;">${loc.searchName}</div>
                        <a href="${googleMapsUrl}" target="_blank" style="display: inline-flex; align-items: center; gap: 8px; background: linear-gradient(135deg, #3B82F6, #2563EB); color: white; padding: 8px 16px; border-radius: 8px; text-decoration: none; font-size: 13px; font-weight: 600; box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);">
                            <i class="fas fa-external-link-alt"></i>
                            구글 맵에서 보기
                        </a>
                    </div>`
                });

                marker.addListener('click', () => {
                    infoWindow.open(map, marker);
                    showPlaceInfo(loc, color, index);
                });

                markers.push(marker);
            });

            // Center and zoom map
            map.panTo(data.center);
            map.setZoom(data.zoom);

            // Timeline Updates
            const tl = document.getElementById('timeline');
            tl.innerHTML = '<div class="timeline-line"></div>';

            data.timeline.forEach((item, i) => {
                const el = document.createElement('div');
                el.className = "flex items-start mb-5 relative z-10 animate-fade-in-up";
                el.style.animationDelay = `${i * 0.05}s`;

                // Make timeline item clickable if it has a location
                const isClickable = item.location && LOCS[item.location];
                const clickableClass = isClickable ? 'cursor-pointer hover:scale-[1.03] transition-all duration-300' : '';

                el.innerHTML = `
                    <div class="flex-shrink-0 w-10 h-10 bg-gradient-to-br from-teal-500 to-cyan-500 border-2 border-white rounded-full flex items-center justify-center text-white mr-4 shadow-lg z-10">
                        <i class="fas ${item.icon} text-sm"></i>
                    </div>
                    <div class="flex-grow bg-white p-4 rounded-xl border-2 ${item.highlight ? 'border-amber-400 bg-gradient-to-br from-amber-50 to-orange-50' : 'border-gray-200'} shadow-md ${clickableClass} hover:shadow-xl">
                        <span class="time-badge ${item.highlight ? 'highlight' : ''} mb-2">${item.time}</span>
                        <h4 class="font-bold text-gray-900 text-sm mt-2 leading-tight">${item.title}</h4>
                        <p class="text-xs text-gray-600 mt-1.5 leading-relaxed">${item.desc}</p>
                        ${isClickable ? '<div class="text-xs text-blue-600 mt-2 font-medium"><i class="fas fa-map-pin mr-1"></i>지도에서 보기</div>' : ''}
                    </div>
                `;

                // Add click event to show location on map
                if (isClickable) {
                    el.addEventListener('click', () => {
                        const loc = LOCS[item.location];
                        const markerIndex = data.markers.findIndex(m => m === loc);
                        if (markerIndex !== -1) {
                            // Pan to location
                            map.panTo({ lat: loc.lat, lng: loc.lng });
                            map.setZoom(16);

                            // Find marker color
                            let color = '#0F766E';
                            if (loc.title.includes('공항')) color = '#DB2777';
                            if (loc.title.includes('호텔') || loc.title.includes('MGM')) color = '#059669';
                            if (loc.title.includes('맥주')) color = '#D97706';
                            if (loc.title.includes('해수욕장') || loc.title.includes('잔교')) color = '#3B82F6';
                            if (loc.title.includes('해양')) color = '#06B6D4';
                            if (loc.title.includes('쇼핑') || loc.title.includes('MIXC') || loc.title.includes('타이동')) color = '#8B5CF6';
                            if (loc.title.includes('신호산') || loc.title.includes('샤오위산')) color = '#10B981';
                            if (loc.title.includes('교당')) color = '#F59E0B';
                            if (loc.title.includes('광장')) color = '#EF4444';

                            // Trigger marker click
                            if (markers[markerIndex]) {
                                google.maps.event.trigger(markers[markerIndex], 'click');
                            }
                        }
                    });
                }

                tl.appendChild(el);
            });
        }

        // Google Maps API will automatically call initMap() when loaded
    </script>
</body>
</html>
