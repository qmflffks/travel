<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ì¹­ë‹¤ì˜¤ 2ë°• 3ì¼ ì—¬í–‰ ì¼ì •</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700;900&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Noto Sans KR', sans-serif;
      background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 50%, #f1f5f9 100%);
      color: #1e293b;
      min-height: 100vh;
    }

    /* í—¤ë” */
    header {
      background: linear-gradient(135deg, #3b82f6 0%, #1e40af 50%, #f59e0b 100%);
      padding: 3rem 1rem;
      text-align: center;
      position: relative;
      overflow: hidden;
    }

    header::before {
      content: '';
      position: absolute;
      inset: 0;
      background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
    }

    .header-content {
      position: relative;
      z-index: 1;
    }

    .badge {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      background: rgba(255,255,255,0.2);
      backdrop-filter: blur(10px);
      padding: 0.5rem 1rem;
      border-radius: 50px;
      font-size: 0.875rem;
      color: white;
      margin-bottom: 1rem;
    }

    h1 {
      font-size: clamp(2.5rem, 8vw, 4rem);
      font-weight: 900;
      margin-bottom: 0.5rem;
      color: white;
    }

    h1 .chinese {
      background: linear-gradient(90deg, #fef3c7, #fcd34d, #f59e0b);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .subtitle {
      color: rgba(255,255,255,0.9);
      font-size: 1.25rem;
    }

    .header-info {
      display: flex;
      justify-content: center;
      gap: 2rem;
      margin-top: 1.5rem;
      flex-wrap: wrap;
    }

    .header-info span {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      color: rgba(255,255,255,0.9);
      font-size: 0.875rem;
    }

    /* íƒ­ ë„¤ë¹„ê²Œì´ì…˜ */
    .tabs {
      position: sticky;
      top: 0;
      z-index: 1000;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid #e2e8f0;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    }

    .tabs-inner {
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
    }

    .tab {
      flex: 1;
      padding: 1rem;
      text-align: center;
      cursor: pointer;
      border: none;
      background: transparent;
      color: #94a3b8;
      font-family: inherit;
      font-size: 1rem;
      transition: all 0.3s;
      position: relative;
    }

    .tab:hover {
      color: #475569;
      background: #f8fafc;
    }

    .tab.active {
      color: #1e293b;
    }

    .tab .day-num {
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      opacity: 0.6;
      margin-bottom: 0.25rem;
    }

    .tab .day-title {
      font-weight: 600;
    }

    .tab::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: linear-gradient(90deg, #f59e0b, #ea580c);
      transform: scaleX(0);
      transition: transform 0.3s;
    }

    .tab.active::after {
      transform: scaleX(1);
    }

    .tab[data-day="2"]::after {
      background: linear-gradient(90deg, #10b981, #0d9488);
    }

    .tab[data-day="3"]::after {
      background: linear-gradient(90deg, #8b5cf6, #7c3aed);
    }

    /* ë©”ì¸ ì»¨í…Œì´ë„ˆ */
    main {
      max-width: 1200px;
      margin: 0 auto;
      padding: 2rem 1rem;
    }

    .section-title {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      margin-bottom: 1rem;
      font-size: 1.25rem;
      font-weight: 700;
      color: #1e293b;
    }

    .section-title .emoji {
      font-size: 1.5rem;
    }

    .section-title .sub {
      color: #64748b;
      font-size: 0.875rem;
      font-weight: 400;
    }

    /* ì§€ë„ */
    .map-container {
      background: white;
      border-radius: 1rem;
      overflow: hidden;
      border: 1px solid #e2e8f0;
      margin-bottom: 2rem;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
    }

    .map-wrapper {
      height: 450px;
      width: 100%;
    }

    .leaflet-popup-content-wrapper {
      background: white;
      color: #1e293b;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.15);
    }

    .leaflet-popup-tip {
      background: white;
    }

    .leaflet-popup-content {
      margin: 12px 16px;
    }

    .popup-title {
      font-weight: 700;
      font-size: 1rem;
      margin-bottom: 0.25rem;
      color: #1e293b;
    }

    .popup-info {
      font-size: 0.875rem;
      color: #64748b;
    }

    /* ë²”ë¡€ */
    .legend {
      display: flex;
      flex-wrap: wrap;
      gap: 0.75rem;
      padding: 1rem;
      border-top: 1px solid #e2e8f0;
      background: #f8fafc;
    }

    .legend-item {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      background: white;
      padding: 0.5rem 0.75rem;
      border-radius: 50px;
      font-size: 0.875rem;
      cursor: pointer;
      transition: all 0.2s;
      border: 1px solid #e2e8f0;
      color: #475569;
    }

    .legend-item:hover {
      border-color: #f59e0b;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }

    .legend-num {
      width: 1.5rem;
      height: 1.5rem;
      background: linear-gradient(135deg, #f59e0b, #ea580c);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.75rem;
      font-weight: 700;
      color: white;
    }

    /* íƒ€ì„ë¼ì¸ */
    .timeline {
      position: relative;
      padding-left: 3rem;
    }

    .timeline::before {
      content: '';
      position: absolute;
      left: 0.875rem;
      top: 0;
      bottom: 0;
      width: 3px;
      background: linear-gradient(180deg, #f59e0b 0%, #ea580c 100%);
      opacity: 0.3;
      border-radius: 3px;
    }

    .timeline[data-day="2"]::before {
      background: linear-gradient(180deg, #10b981 0%, #0d9488 100%);
    }

    .timeline[data-day="3"]::before {
      background: linear-gradient(180deg, #8b5cf6 0%, #7c3aed 100%);
    }

    .timeline-item {
      position: relative;
      margin-bottom: 1rem;
      animation: fadeInUp 0.5s ease-out forwards;
      opacity: 0;
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .timeline-node {
      position: absolute;
      left: -2.125rem;
      width: 1.75rem;
      height: 1.75rem;
      background: linear-gradient(135deg, #f59e0b, #ea580c);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.75rem;
      font-weight: 700;
      color: white;
      box-shadow: 0 4px 15px rgba(245, 158, 11, 0.4);
    }

    .timeline[data-day="2"] .timeline-node {
      background: linear-gradient(135deg, #10b981, #0d9488);
      box-shadow: 0 4px 15px rgba(16, 185, 129, 0.4);
    }

    .timeline[data-day="3"] .timeline-node {
      background: linear-gradient(135deg, #8b5cf6, #7c3aed);
      box-shadow: 0 4px 15px rgba(139, 92, 246, 0.4);
    }

    .timeline-card {
      background: white;
      border: 1px solid #e2e8f0;
      border-radius: 0.75rem;
      padding: 1rem;
      transition: all 0.3s;
      box-shadow: 0 2px 8px rgba(0,0,0,0.04);
    }

    .timeline-card:hover {
      border-color: #f59e0b;
      transform: translateX(5px);
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
    }

    .timeline[data-day="2"] .timeline-card:hover {
      border-color: #10b981;
    }

    .timeline[data-day="3"] .timeline-card:hover {
      border-color: #8b5cf6;
    }

    .timeline-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      gap: 1rem;
      flex-wrap: wrap;
    }

    .timeline-main {
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }

    .timeline-time {
      color: #ea580c;
      font-family: monospace;
      font-weight: 700;
      font-size: 0.875rem;
      background: #fff7ed;
      padding: 0.25rem 0.5rem;
      border-radius: 4px;
    }

    .timeline[data-day="2"] .timeline-time {
      color: #059669;
      background: #ecfdf5;
    }

    .timeline[data-day="3"] .timeline-time {
      color: #7c3aed;
      background: #f5f3ff;
    }

    .timeline-activity {
      font-weight: 600;
      font-size: 1rem;
      color: #1e293b;
    }

    .timeline-duration {
      font-size: 0.75rem;
      background: #f1f5f9;
      padding: 0.25rem 0.5rem;
      border-radius: 50px;
      color: #64748b;
    }

    .timeline-details {
      margin-top: 0.5rem;
      display: flex;
      flex-wrap: wrap;
      gap: 0.75rem;
    }

    .timeline-transport {
      font-size: 0.875rem;
      color: #2563eb;
      display: flex;
      align-items: center;
      gap: 0.25rem;
    }

    .timeline-note {
      font-size: 0.875rem;
      color: #d97706;
      display: flex;
      align-items: center;
      gap: 0.25rem;
    }

    /* ì •ë³´ ì¹´ë“œ ê·¸ë¦¬ë“œ */
    .info-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 1.5rem;
      margin-top: 2rem;
    }

    .info-card {
      background: linear-gradient(135deg, #eff6ff, #ffffff);
      border: 1px solid #bfdbfe;
      border-radius: 1rem;
      padding: 1.5rem;
    }

    .info-card.amber {
      background: linear-gradient(135deg, #fffbeb, #ffffff);
      border-color: #fcd34d;
    }

    .info-card h3 {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-size: 1.125rem;
      margin-bottom: 1rem;
      color: #1e293b;
    }

    .info-card ul {
      list-style: none;
    }

    .info-card li {
      padding: 0.375rem 0;
      font-size: 0.875rem;
      color: #475569;
    }

    .info-card li strong {
      color: #2563eb;
    }

    .info-card.amber li strong {
      color: #d97706;
    }

    /* í˜¸í…” ì¹´ë“œ */
    .hotel-card {
      background: linear-gradient(90deg, #faf5ff, #ffffff, #fffbeb);
      border: 1px solid #e2e8f0;
      border-radius: 1rem;
      padding: 1.5rem;
      margin-top: 2rem;
      box-shadow: 0 4px 20px rgba(0,0,0,0.05);
    }

    .hotel-header {
      display: flex;
      align-items: center;
      gap: 1rem;
      margin-bottom: 1rem;
    }

    .hotel-header .emoji {
      font-size: 2.5rem;
    }

    .hotel-header h3 {
      font-size: 1.25rem;
      color: #1e293b;
    }

    .hotel-header p {
      font-size: 0.875rem;
      color: #64748b;
    }

    .hotel-info-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 1rem;
    }

    .hotel-info-item {
      background: white;
      border-radius: 0.5rem;
      padding: 0.75rem;
      border: 1px solid #e2e8f0;
    }

    .hotel-info-item .label {
      font-size: 0.75rem;
      color: #64748b;
      margin-bottom: 0.25rem;
    }

    .hotel-info-item .value {
      font-weight: 600;
      color: #1e293b;
    }

    .hotel-info-item .value.highlight {
      color: #d97706;
    }

    /* í‘¸í„° */
    footer {
      margin-top: 3rem;
      padding: 2rem 1rem;
      border-top: 1px solid #e2e8f0;
      text-align: center;
      color: #64748b;
      font-size: 0.875rem;
      background: white;
    }

    /* ì¼ì • ìˆ¨ê¹€ */
    .day-content {
      display: none;
    }

    .day-content.active {
      display: block;
    }

    /* ë°˜ì‘í˜• */
    @media (max-width: 640px) {
      .map-wrapper {
        height: 350px;
      }

      .timeline {
        padding-left: 2.5rem;
      }

      .timeline-node {
        left: -1.875rem;
        width: 1.5rem;
        height: 1.5rem;
        font-size: 0.625rem;
      }
    }
  </style>
</head>
<body>
  <header>
    <div class="header-content">
      <div class="badge">
        <span>ğŸ‡¨ğŸ‡³</span>
        <span>ì¤‘êµ­ ì‚°ë‘¥ì„±</span>
      </div>
      <h1>
        <span class="chinese">é’å³¶</span>
        <span>ì¹­ë‹¤ì˜¤</span>
      </h1>
      <p class="subtitle">2ë°• 3ì¼ ì—¬í–‰ ì¼ì •</p>
      <div class="header-info">
        <span>ğŸš‡ ëŒ€ì¤‘êµí†µ ì´ìš©</span>
        <span>ğŸº ë§¥ì£¼ì˜ ë„ì‹œ</span>
        <span>ğŸ–ï¸ ì•„ë¦„ë‹¤ìš´ í•´ë³€</span>
      </div>
    </div>
  </header>

  <nav class="tabs">
    <div class="tabs-inner">
      <button class="tab active" data-day="1" onclick="showDay(1)">
        <div class="day-num">Day 1</div>
        <div class="day-title">ë§¥ì£¼ë°•ë¬¼ê´€ & êµ¬ì‹œê°€ì§€</div>
      </button>
      <button class="tab" data-day="2" onclick="showDay(2)">
        <div class="day-num">Day 2</div>
        <div class="day-title">ì•„ë¦„ë‹¤ìš´ í•´ì•ˆ</div>
      </button>
      <button class="tab" data-day="3" onclick="showDay(3)">
        <div class="day-num">Day 3</div>
        <div class="day-title">ì‡¼í•‘ & ê³µí•­</div>
      </button>
    </div>
  </nav>

  <main>
    <!-- Day 1 -->
    <div class="day-content active" id="day1">
      <div class="section-title">
        <span class="emoji">ğŸ—ºï¸</span>
        <span>ë™ì„  ì§€ë„</span>
        <span class="sub">â†’ ë§¥ì£¼ë°•ë¬¼ê´€ & êµ¬ì‹œê°€ì§€</span>
      </div>

      <div class="map-container">
        <div class="map-wrapper" id="map1"></div>
        <div class="legend" id="legend1"></div>
      </div>

      <div class="section-title">
        <span class="emoji">ğŸ“…</span>
        <span>ìƒì„¸ ì¼ì •</span>
      </div>

      <div class="timeline" data-day="1" id="timeline1"></div>
    </div>

    <!-- Day 2 -->
    <div class="day-content" id="day2">
      <div class="section-title">
        <span class="emoji">ğŸ—ºï¸</span>
        <span>ë™ì„  ì§€ë„</span>
        <span class="sub">â†’ ì•„ë¦„ë‹¤ìš´ í•´ì•ˆ</span>
      </div>

      <div class="map-container">
        <div class="map-wrapper" id="map2"></div>
        <div class="legend" id="legend2"></div>
      </div>

      <div class="section-title">
        <span class="emoji">ğŸ“…</span>
        <span>ìƒì„¸ ì¼ì •</span>
      </div>

      <div class="timeline" data-day="2" id="timeline2"></div>
    </div>

    <!-- Day 3 -->
    <div class="day-content" id="day3">
      <div class="section-title">
        <span class="emoji">ğŸ—ºï¸</span>
        <span>ë™ì„  ì§€ë„</span>
        <span class="sub">â†’ ì‡¼í•‘ & ê³µí•­</span>
      </div>

      <div class="map-container">
        <div class="map-wrapper" id="map3"></div>
        <div class="legend" id="legend3"></div>
      </div>

      <div class="section-title">
        <span class="emoji">ğŸ“…</span>
        <span>ìƒì„¸ ì¼ì •</span>
      </div>

      <div class="timeline" data-day="3" id="timeline3"></div>
    </div>

    <!-- ê³µí†µ ì •ë³´ -->
    <div class="info-grid">
      <div class="info-card">
        <h3>ğŸš‡ ì§€í•˜ì²  ì •ë³´</h3>
        <ul>
          <li>â€¢ <strong>8í˜¸ì„ </strong>: ê³µí•­ â†’ ì‹œë‚´ ì—°ê²°</li>
          <li>â€¢ <strong>11í˜¸ì„ </strong>: MGMí˜¸í…”(ë‹¨ì£¼ë§ˆë£¨ì—­)</li>
          <li>â€¢ <strong>2í˜¸ì„ </strong>: ì‹œë‚´ ì£¼ìš” ê´€ê´‘ì§€ (5.4ê´‘ì¥)</li>
          <li>â€¢ <strong>3í˜¸ì„ </strong>: íƒ€ì´ë™, êµ¬ì‹œê°€ì§€, í•´ì•ˆ</li>
          <li style="padding-top: 0.5rem; font-size: 0.75rem; color: #94a3b8;">ìš”ê¸ˆ: 2~13ìœ„ì•ˆ (ê±°ë¦¬ ë¹„ë¡€)</li>
        </ul>
      </div>

      <div class="info-card amber">
        <h3>ğŸ’¡ ì—¬í–‰ íŒ</h3>
        <ul>
          <li>â€¢ <strong>ê³ ë“œë§µ or ë°”ì´ë‘ë§µ ì•±</strong> ì„¤ì¹˜ ê¶Œì¥ (êµ¬ê¸€ë§µ X)</li>
          <li>â€¢ <strong>ìœ„ì±—í˜ì´/ì•Œë¦¬í˜ì´</strong> ì¤€ë¹„</li>
          <li>â€¢ ë§¥ì£¼ë°•ë¬¼ê´€ <strong>íŠ¸ë¦½ë‹·ì»´ ì‚¬ì „ì˜ˆë§¤</strong> ì¶”ì²œ</li>
          <li>â€¢ í•´í”¼ì•„ì›Œ: <strong>17:30~19:00</strong></li>
          <li style="padding-top: 0.5rem; font-size: 0.75rem; color: #94a3b8;">ë¹„í–‰ê¸° ì¶œë°œ 2ì‹œê°„ ì „ ê³µí•­ ë„ì°© ê¶Œì¥</li>
        </ul>
      </div>
    </div>

    <div class="hotel-card">
      <div class="hotel-header">
        <span class="emoji">ğŸ¨</span>
        <div>
          <h3>MGM ì¹­ë‹¤ì˜¤</h3>
          <p>ì§€í•˜ì²  11í˜¸ì„  ë‹¨ì£¼ë§ˆë£¨(å•å²­è·¯)ì—­ ì¸ê·¼</p>
        </div>
      </div>
      <div class="hotel-info-grid">
        <div class="hotel-info-item">
          <div class="label">ì²´í¬ì¸</div>
          <div class="value">1ì¼ì°¨ 17:00</div>
        </div>
        <div class="hotel-info-item">
          <div class="label">ì²´í¬ì•„ì›ƒ</div>
          <div class="value">3ì¼ì°¨ 14:00ê¹Œì§€</div>
        </div>
        <div class="hotel-info-item">
          <div class="label">í•´í”¼ì•„ì›Œ</div>
          <div class="value highlight">17:30 ~ 19:00</div>
        </div>
      </div>
    </div>
  </main>

  <footer>
    <p>ğŸº ì¹­ë‹¤ì˜¤ 2ë°• 3ì¼ ì—¬í–‰ ì¼ì •í‘œ</p>
    <p>ëŒ€ì¤‘êµí†µ(ì§€í•˜ì² ) ê¸°ì¤€ â€¢ MGM í˜¸í…” ìˆ™ë°•</p>
  </footer>

  <script>
    // ì¥ì†Œ ë°ì´í„° (ì‹¤ì œ ì¢Œí‘œ)
    const locations = {
      airport: { lat: 36.3661, lng: 120.0874, name: 'ì¹­ë‹¤ì˜¤ ìì˜¤ë™ êµ­ì œê³µí•­', icon: 'âœˆï¸' },
      hotel: { lat: 36.0872, lng: 120.4285, name: 'MGM í˜¸í…”', icon: 'ğŸ¨' },
      beerMuseum: { lat: 36.0847, lng: 120.3695, name: 'ì¹­ë‹¤ì˜¤ ë§¥ì£¼ë°•ë¬¼ê´€', icon: 'ğŸº' },
      signalHill: { lat: 36.0645, lng: 120.3265, name: 'ì‹ í˜¸ì‚° ê³µì›', icon: 'â›°ï¸' },
      zhanqiao: { lat: 36.0590, lng: 120.3168, name: 'ì”êµ', icon: 'ğŸŒ‰' },
      cathedral: { lat: 36.0672, lng: 120.3218, name: 'ì²œì£¼êµë‹¹ (ì„± ë¯¸ì¹´ì—˜ ëŒ€ì„±ë‹¹)', icon: 'â›ª' },
      taidong: { lat: 36.0832, lng: 120.3672, name: 'íƒ€ì´ë™ ì•¼ì‹œì¥', icon: 'ğŸ®' },
      xiaoyushan: { lat: 36.0580, lng: 120.3380, name: 'ìƒ¤ì˜¤ìœ„ì‚° ê³µì›', icon: 'ğŸ”' },
      badaguan: { lat: 36.0540, lng: 120.3480, name: 'íŒ”ëŒ€ê´€ í’ê²½êµ¬', icon: 'ğŸ–ï¸' },
      beach1: { lat: 36.0545, lng: 120.3350, name: 'ì œ1í•´ìˆ˜ìš•ì¥', icon: 'ğŸ–ï¸' },
      mixc: { lat: 36.0675, lng: 120.3875, name: 'MIXC ì‡¼í•‘ì„¼í„°', icon: 'ğŸ›ï¸' },
      may4: { lat: 36.0625, lng: 120.3845, name: '5.4 ê´‘ì¥', icon: 'ğŸ¡' },
    };

    // ì¼ì • ë°ì´í„°
    const schedules = {
      1: {
        spots: ['airport', 'beerMuseum', 'signalHill', 'cathedral', 'zhanqiao', 'hotel', 'taidong', 'hotel'],
        color: '#f59e0b',
        colorEnd: '#ea580c',
        timeline: [
          { time: '09:20', activity: 'ì¹­ë‹¤ì˜¤ ìì˜¤ë™ êµ­ì œê³µí•­ ë„ì°©', location: 'airport', transport: 'ì§€í•˜ì²  8í˜¸ì„  â†’ 2í˜¸ì„  íƒ‘ìŠ¹', duration: 'ì•½ 1ì‹œê°„ 30ë¶„' },
          { time: '11:00', activity: 'ì§ ë³´ê´€ í›„ ë§¥ì£¼ë°•ë¬¼ê´€ìœ¼ë¡œ ì´ë™', location: 'beerMuseum', transport: 'ì§€í•˜ì²  2í˜¸ì„  ë¦¬ì´Œë£¨ì—­ â†’ ë„ë³´ 10ë¶„' },
          { time: '11:30', activity: 'ì¹­ë‹¤ì˜¤ ë§¥ì£¼ë°•ë¬¼ê´€ ê´€ëŒ', location: 'beerMuseum', duration: 'ì•½ 2ì‹œê°„', note: 'ìƒë§¥ì£¼ ì‹œìŒ í¬í•¨' },
          { time: '13:30', activity: 'ì ì‹¬ ì‹ì‚¬ (ë§¥ì£¼ê±°ë¦¬)', location: 'beerMuseum', transport: 'ë„ë³´', duration: 'ì•½ 1ì‹œê°„' },
          { time: '14:30', activity: 'ì‹ í˜¸ì‚° ê³µì›', location: 'signalHill', transport: 'ë„ë³´ 15ë¶„', duration: 'ì•½ 1ì‹œê°„', note: 'ì¹­ë‹¤ì˜¤ ì‹œë‚´ ì „ë§' },
          { time: '15:30', activity: 'ì²œì£¼êµë‹¹ (ì„± ë¯¸ì¹´ì—˜ ëŒ€ì„±ë‹¹)', location: 'cathedral', transport: 'ë„ë³´ 10ë¶„', duration: 'ì•½ 30ë¶„' },
          { time: '16:00', activity: 'ì”êµ ì‚°ì±…', location: 'zhanqiao', transport: 'ë„ë³´ 15ë¶„', duration: 'ì•½ 1ì‹œê°„', note: 'ì¹­ë‹¤ì˜¤ ë§¥ì£¼ ë¼ë²¨ ë°°ê²½' },
          { time: '17:00', activity: 'MGM í˜¸í…” ì²´í¬ì¸', location: 'hotel', transport: 'ì§€í•˜ì²  1í˜¸ì„  â†’ 11í˜¸ì„  (ë‹¨ì£¼ë§ˆë£¨ì—­)', duration: 'ì•½ 40ë¶„' },
          { time: '18:30', activity: 'íƒ€ì´ë™ ì•¼ì‹œì¥', location: 'taidong', transport: 'ì§€í•˜ì²  11í˜¸ì„  â†’ 3í˜¸ì„  íƒ€ì´ë™ì—­', note: 'ì €ë…ì‹ì‚¬ & ì‡¼í•‘' },
          { time: '21:00', activity: 'í˜¸í…” ë³µê·€', location: 'hotel', transport: 'ì§€í•˜ì² ' },
        ]
      },
      2: {
        spots: ['hotel', 'xiaoyushan', 'beach1', 'badaguan', 'hotel', 'may4', 'hotel'],
        color: '#10b981',
        colorEnd: '#0d9488',
        timeline: [
          { time: '07:00', activity: 'í˜¸í…” ì¡°ì‹', location: 'hotel', duration: 'ì•½ 1ì‹œê°„' },
          { time: '09:00', activity: 'ìƒ¤ì˜¤ìœ„ì‚°ìœ¼ë¡œ ì¶œë°œ', location: 'xiaoyushan', transport: 'ì§€í•˜ì²  2í˜¸ì„  â†’ 3í˜¸ì„  íƒ‘ìŠ¹ (ë°”ë¯¼ìƒ¤ë£¨ì—­)', duration: 'ì•½ 30ë¶„' },
          { time: '09:30', activity: 'ìƒ¤ì˜¤ìœ„ì‚° ê³µì› ê´€ëŒ', location: 'xiaoyushan', duration: 'ì•½ 1ì‹œê°„ 30ë¶„', note: 'ì¹­ë‹¤ì˜¤ ë¶‰ì€ ì§€ë¶• ì „ê²½ ë·°í¬ì¸íŠ¸' },
          { time: '11:00', activity: 'ì œ1í•´ìˆ˜ìš•ì¥ ì‚°ì±…', location: 'beach1', transport: 'ë„ë³´ 10ë¶„', duration: 'ì•½ 40ë¶„' },
          { time: '11:40', activity: 'íŒ”ëŒ€ê´€ í’ê²½êµ¬ ì‚°ì±…', location: 'badaguan', transport: 'ë„ë³´ 15ë¶„', duration: 'ì•½ 1ì‹œê°„', note: 'ìœ ëŸ½í’ ë³„ì¥ ê±°ë¦¬' },
          { time: '12:40', activity: 'ì ì‹¬ ì‹ì‚¬ (íŒ”ëŒ€ê´€ ê·¼ì²˜)', location: 'badaguan', duration: 'ì•½ 1ì‹œê°„' },
          { time: '14:00', activity: 'í˜¸í…”ë¡œ ì´ë™', location: 'hotel', transport: 'ì§€í•˜ì²  3í˜¸ì„  â†’ 2í˜¸ì„  â†’ 11í˜¸ì„ ', duration: 'ì•½ 40ë¶„' },
          { time: '15:00', activity: 'í˜¸í…” íœ´ì‹ / ìˆ˜ì˜ì¥', location: 'hotel' },
          { time: '17:30', activity: 'ğŸ¸ í˜¸í…” í•´í”¼ì•„ì›Œ ì°¸ì—¬', location: 'hotel', duration: '1ì‹œê°„ 30ë¶„', note: '17:30 ~ 19:00' },
          { time: '19:30', activity: '5.4 ê´‘ì¥ ì•¼ê²½', location: 'may4', transport: 'ì§€í•˜ì²  11í˜¸ì„  â†’ 2í˜¸ì„  (ìš°ì‹œê´‘ì¥ì—­)', note: '5ì›”ì˜ ë°”ëŒ ì¡°í˜•ë¬¼ ì•¼ê²½' },
          { time: '21:00', activity: 'í˜¸í…” ë³µê·€', location: 'hotel', transport: 'ì§€í•˜ì² ' },
        ]
      },
      3: {
        spots: ['hotel', 'mixc', 'hotel', 'airport'],
        color: '#8b5cf6',
        colorEnd: '#7c3aed',
        timeline: [
          { time: '08:00', activity: 'ê¸°ìƒ ë° ì§ ì •ë¦¬', location: 'hotel' },
          { time: '09:00', activity: 'MIXC ì‡¼í•‘ì„¼í„°', location: 'mixc', transport: 'ì§€í•˜ì²  11í˜¸ì„  â†’ 2í˜¸ì„  (ìš°ì‹œê´‘ì¥ì—­)', note: 'ëŒ€í˜• ì‡¼í•‘ëª°' },
          { time: '12:00', activity: 'ì ì‹¬ ì‹ì‚¬ (MIXC ë‚´)', location: 'mixc', duration: 'ì•½ 1ì‹œê°„' },
          { time: '13:00', activity: 'í˜¸í…” ë³µê·€ ë° ì²´í¬ì•„ì›ƒ', location: 'hotel', transport: 'ì§€í•˜ì² ', note: 'ì²´í¬ì•„ì›ƒ 14:00ê¹Œì§€' },
          { time: '14:00', activity: 'ê³µí•­ìœ¼ë¡œ ì´ë™', location: 'airport', transport: 'ì§€í•˜ì²  11í˜¸ì„  â†’ 8í˜¸ì„ ', duration: 'ì•½ 1ì‹œê°„ 30ë¶„' },
          { time: '15:30', activity: 'ê³µí•­ ë„ì°© ë° ì²´í¬ì¸', location: 'airport' },
          { time: '18:10', activity: 'âœˆï¸ ë¹„í–‰ê¸° ì¶œë°œ', location: 'airport' },
        ]
      }
    };

    let maps = {};
    let currentDay = 1;
    let mapsInitialized = { 1: false, 2: false, 3: false };

    // ì»¤ìŠ¤í…€ ë§ˆì»¤ ì•„ì´ì½˜ ìƒì„±
    function createIcon(number, color, colorEnd) {
      return L.divIcon({
        className: 'custom-marker',
        html: `<div style="
          background: linear-gradient(135deg, ${color}, ${colorEnd});
          width: 32px;
          height: 32px;
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          color: white;
          font-weight: bold;
          font-size: 14px;
          box-shadow: 0 4px 15px ${color}60;
          border: 3px solid white;
        ">${number}</div>`,
        iconSize: [32, 32],
        iconAnchor: [16, 16],
        popupAnchor: [0, -20]
      });
    }

    // ì§€ë„ ì´ˆê¸°í™”
    function initMap(dayNum) {
      const mapId = `map${dayNum}`;
      const schedule = schedules[dayNum];

      // ì´ë¯¸ ì´ˆê¸°í™”ë˜ì—ˆìœ¼ë©´ invalidateSizeë§Œ í˜¸ì¶œ
      if (mapsInitialized[dayNum]) {
        if (maps[dayNum]) {
          maps[dayNum].invalidateSize();
        }
        return;
      }

      // ì¤‘ì‹¬ì  ê³„ì‚°
      const uniqueSpots = [...new Set(schedule.spots)];
      const lats = uniqueSpots.map(s => locations[s].lat);
      const lngs = uniqueSpots.map(s => locations[s].lng);
      const centerLat = (Math.min(...lats) + Math.max(...lats)) / 2;
      const centerLng = (Math.min(...lngs) + Math.max(...lngs)) / 2;

      const map = L.map(mapId, {
        zoomControl: true,
        scrollWheelZoom: true
      }).setView([centerLat, centerLng], 11);

      // ë°ì€ í…Œë§ˆ íƒ€ì¼ (CartoDB Positron)
      L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
        attribution: '&copy; OpenStreetMap &copy; CARTO',
        subdomains: 'abcd',
        maxZoom: 19
      }).addTo(map);

      // ê²½ë¡œ ê·¸ë¦¬ê¸°
      const routeCoords = schedule.spots.map(s => [locations[s].lat, locations[s].lng]);
      L.polyline(routeCoords, {
        color: schedule.color,
        weight: 4,
        opacity: 0.8,
        dashArray: '10, 8',
        lineCap: 'round'
      }).addTo(map);

      // ë§ˆì»¤ ì¶”ê°€
      const addedLocations = new Set();
      let markerNum = 1;

      schedule.spots.forEach((spotKey) => {
        if (!addedLocations.has(spotKey)) {
          const spot = locations[spotKey];
          const marker = L.marker([spot.lat, spot.lng], {
            icon: createIcon(markerNum, schedule.color, schedule.colorEnd)
          }).addTo(map);

          marker.bindPopup(`
            <div class="popup-title">${spot.icon} ${spot.name}</div>
            <div class="popup-info">ìˆœì„œ: ${markerNum}ë²ˆì§¸ ë°©ë¬¸</div>
          `);

          addedLocations.add(spotKey);
          markerNum++;
        }
      });

      // ë²”ìœ„ì— ë§ê²Œ ì¡°ì •
      const bounds = L.latLngBounds(routeCoords);
      map.fitBounds(bounds, { padding: [50, 50] });

      maps[dayNum] = map;
      mapsInitialized[dayNum] = true;

      // ë²”ë¡€ ìƒì„±
      createLegend(dayNum, uniqueSpots, schedule.color, schedule.colorEnd);
    }

    // ë²”ë¡€ ìƒì„±
    function createLegend(dayNum, spots, color, colorEnd) {
      const legendEl = document.getElementById(`legend${dayNum}`);
      legendEl.innerHTML = spots.map((spotKey, idx) => {
        const spot = locations[spotKey];
        return `
          <div class="legend-item" onclick="focusMarker(${dayNum}, ${spot.lat}, ${spot.lng})">
            <span class="legend-num" style="background: linear-gradient(135deg, ${color}, ${colorEnd})">${idx + 1}</span>
            <span>${spot.icon}</span>
            <span>${spot.name}</span>
          </div>
        `;
      }).join('');
    }

    // ë§ˆì»¤ í¬ì»¤ìŠ¤
    function focusMarker(dayNum, lat, lng) {
      if (maps[dayNum]) {
        maps[dayNum].setView([lat, lng], 14, { animate: true });
      }
    }

    // íƒ€ì„ë¼ì¸ ìƒì„±
    function createTimeline(dayNum) {
      const schedule = schedules[dayNum];
      const timelineEl = document.getElementById(`timeline${dayNum}`);

      timelineEl.innerHTML = schedule.timeline.map((item, idx) => `
        <div class="timeline-item" style="animation-delay: ${idx * 0.1}s">
          <div class="timeline-node">${idx + 1}</div>
          <div class="timeline-card">
            <div class="timeline-header">
              <div class="timeline-main">
                <span class="timeline-time">${item.time}</span>
                <span class="timeline-activity">${item.activity}</span>
              </div>
              ${item.duration ? `<span class="timeline-duration">${item.duration}</span>` : ''}
            </div>
            ${item.transport || item.note ? `
              <div class="timeline-details">
                ${item.transport ? `<span class="timeline-transport">ğŸš‡ ${item.transport}</span>` : ''}
                ${item.note ? `<span class="timeline-note">ğŸ’¡ ${item.note}</span>` : ''}
              </div>
            ` : ''}
          </div>
        </div>
      `).join('');
    }

    // ì¼ì°¨ ì „í™˜
    function showDay(dayNum) {
      // íƒ­ ì—…ë°ì´íŠ¸
      document.querySelectorAll('.tab').forEach(tab => {
        tab.classList.toggle('active', parseInt(tab.dataset.day) === dayNum);
      });

      // ì»¨í…ì¸  ì—…ë°ì´íŠ¸
      document.querySelectorAll('.day-content').forEach(content => {
        content.classList.remove('active');
      });
      document.getElementById(`day${dayNum}`).classList.add('active');

      currentDay = dayNum;

      // ì§€ë„ ì´ˆê¸°í™” (ì•½ê°„ì˜ ë”œë ˆì´ í›„ - DOMì´ visible ìƒíƒœê°€ ëœ í›„)
      setTimeout(() => {
        initMap(dayNum);
      }, 150);
    }

    // ì´ˆê¸°í™”
    document.addEventListener('DOMContentLoaded', () => {
      // íƒ€ì„ë¼ì¸ ìƒì„±
      createTimeline(1);
      createTimeline(2);
      createTimeline(3);

      // ì²« ë²ˆì§¸ ì§€ë„ ì´ˆê¸°í™”
      setTimeout(() => {
        initMap(1);
      }, 200);
    });
  </script>
</body>
</html>
