<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>칭다오 2박 3일 여행 일정</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Leaflet (Map) -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <!-- FontAwesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700;900&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Noto Sans KR', sans-serif; background-color: #F3F4F6; }
        #map { height: 100%; width: 100%; border-radius: 0.75rem; z-index: 10; }
        .map-wrapper { height: 500px; position: relative; border: 4px solid #fff; border-radius: 1rem; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); }

        /* Time Badge */
        .time-badge { background-color: #E5E7EB; color: #374151; font-weight: 700; font-size: 0.75rem; padding: 2px 8px; border-radius: 4px; display: inline-block; min-width: 50px; text-align: center; }
        .time-badge.highlight { background-color: #FCD34D; color: #92400E; }

        .timeline-line { position: absolute; left: 23px; top: 20px; bottom: 0; width: 2px; background: #E5E7EB; z-index: 0; }

        .btn-day { transition: all 0.2s; }
        .btn-day.active { background-color: #0F766E; color: white; border-color: #0F766E; transform: translateY(-2px); }
    </style>
</head>
<body class="flex flex-col min-h-screen text-gray-800">

    <!-- Header -->
    <nav class="bg-white shadow-md sticky top-0 z-[1000]">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16 items-center">
                <div class="flex items-center">
                    <i class="fas fa-plane-departure text-teal-700 text-2xl mr-3"></i>
                    <div>
                        <h1 class="font-bold text-xl text-gray-900 leading-none">칭다오 2박 3일 여행</h1>
                        <span class="text-xs text-teal-700 font-bold uppercase tracking-wide">MGM 호텔 | 대중교통 | 해피아워</span>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <main class="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full space-y-6">

        <!-- Day Selector -->
        <div class="flex space-x-2">
            <button onclick="updateDay(1)" id="btn-1" class="btn-day active flex-1 px-4 py-3 rounded-lg border border-gray-200 bg-white font-bold shadow-sm text-center">
                Day 1<br><span class="text-xs font-normal">맥주박물관 & 구시가지</span>
            </button>
            <button onclick="updateDay(2)" id="btn-2" class="btn-day flex-1 px-4 py-3 rounded-lg border border-gray-200 bg-white font-bold shadow-sm text-center">
                Day 2<br><span class="text-xs font-normal">해변 산책 & 해피아워</span>
            </button>
            <button onclick="updateDay(3)" id="btn-3" class="btn-day flex-1 px-4 py-3 rounded-lg border border-gray-200 bg-white font-bold shadow-sm text-center">
                Day 3<br><span class="text-xs font-normal">쇼핑 & 귀국</span>
            </button>
        </div>

        <!-- Main Content -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">

            <!-- Map Section -->
            <div class="lg:col-span-2 space-y-4">
                <div class="map-wrapper">
                    <div id="map"></div>
                    <div class="absolute bottom-4 right-4 z-[500] bg-white/95 p-3 rounded-lg shadow border border-gray-200 text-xs">
                        <div class="font-bold mb-2">지하철 노선</div>
                        <div class="flex items-center mb-1"><span class="w-8 h-1 bg-pink-500 mr-2"></span> 8호선 (공항)</div>
                        <div class="flex items-center mb-1"><span class="w-8 h-1 bg-yellow-500 mr-2"></span> 1호선 (시내)</div>
                        <div class="flex items-center mb-1"><span class="w-8 h-1 bg-red-500 mr-2"></span> 2호선 (호텔)</div>
                        <div class="flex items-center"><span class="w-8 h-1 bg-green-600 mr-2"></span> 3호선 (구시가)</div>
                    </div>
                </div>
                <!-- Info Card -->
                <div id="info-card" class="bg-teal-50 p-5 rounded-xl shadow-sm border border-teal-100 text-sm">
                    <!-- JS Injected -->
                </div>
            </div>

            <!-- Timeline Section -->
            <div class="lg:col-span-1">
                <div class="bg-white rounded-xl shadow border border-gray-200 h-full flex flex-col max-h-[700px]">
                    <div class="p-5 bg-gray-50 border-b border-gray-200">
                        <h3 id="day-title" class="text-xl font-bold text-gray-900">Day 1 일정</h3>
                        <p class="text-xs text-gray-500 mt-1">상세 스케줄</p>
                    </div>
                    <div id="timeline" class="p-5 overflow-y-auto flex-grow relative custom-scrollbar">
                        <!-- JS Injected -->
                    </div>
                </div>
            </div>

        </div>
    </main>

    <script>
        // --- DATA ---
        const LOCS = {
            airport: { lat: 36.3661, lng: 120.0874, title: "칭다오 공항" },
            beerMuseum: { lat: 36.0847, lng: 120.3695, title: "칭다오 맥주박물관" },
            signalHill: { lat: 36.0645, lng: 120.3265, title: "신호산 공원" },
            zhanqiao: { lat: 36.0590, lng: 120.3168, title: "잔교" },
            cathedral: { lat: 36.0672, lng: 120.3218, title: "천주교당" },
            taidong: { lat: 36.0832, lng: 120.3672, title: "타이동 야시장" },
            hotel: { lat: 36.0872, lng: 120.4285, title: "MGM 호텔" },
            shilaoren_beach: { lat: 36.0710, lng: 120.4520, title: "석노인 해수욕장" },
            polar_ocean: { lat: 36.0680, lng: 120.4420, title: "극지해양세계" },
            mixc: { lat: 36.0675, lng: 120.3875, title: "MIXC 쇼핑센터" },
            may4: { lat: 36.0625, lng: 120.3845, title: "5.4 광장" }
        };

        const DAYS = {
            1: {
                title: "Day 1: 맥주박물관 & 구시가지",
                info: "공항 도착 후 지하철로 맥주박물관을 관람하고 구시가지를 둘러본 뒤 호텔에 체크인합니다. 저녁은 타이동 야시장에서 즐깁니다.",
                markers: [LOCS.airport, LOCS.beerMuseum, LOCS.signalHill, LOCS.cathedral, LOCS.zhanqiao, LOCS.hotel, LOCS.taidong],
                lines: [
                    { path: [LOCS.airport, LOCS.beerMuseum], color: '#EC4899' },
                    { path: [LOCS.beerMuseum, LOCS.signalHill], color: '#10B981' },
                    { path: [LOCS.signalHill, LOCS.cathedral], color: '#10B981' },
                    { path: [LOCS.cathedral, LOCS.zhanqiao], color: '#10B981' },
                    { path: [LOCS.zhanqiao, LOCS.hotel], color: '#EF4444' },
                    { path: [LOCS.hotel, LOCS.taidong], color: '#10B981' }
                ],
                center: { lat: 36.15, lng: 120.35 },
                zoom: 11,
                timeline: [
                    { time: "09:20", title: "칭다오 공항 도착", highlight: true, icon: "fa-plane-arrival", desc: "입국 수속 후 지하철 8호선 탑승" },
                    { time: "11:00", title: "짐 보관 후 맥주박물관 이동", highlight: false, icon: "fa-subway", desc: "2호선 리촌루역 하차 후 도보 10분" },
                    { time: "11:30", title: "칭다오 맥주박물관 관람", highlight: false, icon: "fa-beer", desc: "생맥주 시음 포함 약 2시간 관람" },
                    { time: "13:30", title: "점심 식사 (맥주거리)", highlight: false, icon: "fa-utensils", desc: "박물관 앞 식당가에서 현지식" },
                    { time: "14:30", title: "신호산 공원", highlight: false, icon: "fa-mountain", desc: "도보 15분, 칭다오 시내 전망 약 1시간" },
                    { time: "15:30", title: "천주교당", highlight: false, icon: "fa-church", desc: "도보 10분, 성 미카엘 대성당 약 30분" },
                    { time: "16:00", title: "잔교 산책", highlight: false, icon: "fa-water", desc: "도보 15분, 칭다오 맥주 라벨 배경 약 1시간" },
                    { time: "17:00", title: "MGM 호텔 체크인", highlight: true, icon: "fa-hotel", desc: "지하철 1호선 → 11호선 (단주마루역)" },
                    { time: "18:30", title: "타이동 야시장", highlight: false, icon: "fa-shopping-bag", desc: "지하철 11호선 → 3호선. 저녁식사 & 쇼핑" },
                    { time: "21:00", title: "호텔 복귀", highlight: false, icon: "fa-bed", desc: "지하철로 호텔 복귀 후 휴식" }
                ]
            },
            2: {
                title: "Day 2: 해변 산책 & 해피아워",
                info: "호텔에서 가까운 석노인 해수욕장과 극지해양세계를 방문합니다. 오후 5시 30분 해피아워에 맞춰 호텔로 복귀하는 것이 핵심입니다.",
                markers: [LOCS.hotel, LOCS.shilaoren_beach, LOCS.polar_ocean],
                lines: [
                    { path: [LOCS.hotel, LOCS.shilaoren_beach], color: '#3B82F6' },
                    { path: [LOCS.shilaoren_beach, LOCS.polar_ocean], color: '#3B82F6' },
                    { path: [LOCS.polar_ocean, LOCS.hotel], color: '#3B82F6' }
                ],
                center: { lat: 36.075, lng: 120.440 },
                zoom: 13,
                timeline: [
                    { time: "07:00", title: "조식 (MGM)", highlight: false, icon: "fa-coffee", desc: "오션뷰 레스토랑에서 든든한 아침" },
                    { time: "09:00", title: "석노인 해수욕장 산책", highlight: false, icon: "fa-umbrella-beach", desc: "호텔에서 도보 또는 택시 10분. 3km 해안 산책로" },
                    { time: "11:00", title: "극지해양세계", highlight: false, icon: "fa-fish", desc: "해수욕장에서 도보 15분. 수족관 & 해양동물 공연" },
                    { time: "13:00", title: "점심 (해변 레스토랑)", highlight: false, icon: "fa-utensils", desc: "해변가 레스토랑에서 해산물 요리" },
                    { time: "14:30", title: "호텔로 복귀", highlight: false, icon: "fa-hotel", desc: "택시 또는 도보로 호텔 복귀" },
                    { time: "15:00", title: "호텔 수영장/사우나", highlight: false, icon: "fa-swimming-pool", desc: "인피니티 풀과 사우나 이용" },
                    { time: "17:30", title: "해피아워 (Happy Hour)", highlight: true, icon: "fa-cocktail", desc: "19:00까지 주류와 음식 무제한. 저녁 식사 해결" },
                    { time: "19:30", title: "5.4 광장 야경 (선택)", highlight: false, icon: "fa-building", desc: "지하철로 5.4광장 야경 관람 또는 호텔 휴식" },
                    { time: "21:00", title: "호텔 휴식", highlight: false, icon: "fa-bed", desc: "편안한 휴식" }
                ]
            },
            3: {
                title: "Day 3: 조식 & 쇼핑 & 귀국",
                info: "호텔 조식을 여유롭게 즐기고 체크아웃 전 MIXC 쇼핑몰에서 쇼핑합니다. 14:00 체크아웃 후 공항으로 이동합니다.",
                markers: [LOCS.hotel, LOCS.mixc, LOCS.airport],
                lines: [
                    { path: [LOCS.hotel, LOCS.mixc], color: '#EF4444' },
                    { path: [LOCS.mixc, LOCS.hotel], color: '#EF4444' },
                    { path: [LOCS.hotel, LOCS.airport], color: '#EC4899' }
                ],
                center: { lat: 36.20, lng: 120.30 },
                zoom: 11,
                timeline: [
                    { time: "08:00", title: "기상 & 짐 정리", highlight: false, icon: "fa-sun", desc: "체크아웃 준비" },
                    { time: "09:00", title: "MGM 조식 뷔페", highlight: true, icon: "fa-utensils", desc: "느긋하게 즐기는 마지막 호텔 조식" },
                    { time: "10:30", title: "MIXC 쇼핑센터", highlight: false, icon: "fa-shopping-bag", desc: "2호선 5.4광장역 하차. 기념품 구매" },
                    { time: "13:00", title: "호텔 복귀", highlight: false, icon: "fa-subway", desc: "쇼핑한 물건 들고 호텔로" },
                    { time: "14:00", title: "체크아웃", highlight: true, icon: "fa-suitcase", desc: "호텔 체크아웃" },
                    { time: "14:30", title: "공항으로 출발", highlight: true, icon: "fa-subway", desc: "지하철 11호선 → 8호선 (약 90분)" },
                    { time: "16:10", title: "공항 도착", highlight: false, icon: "fa-check-circle", desc: "비행기 출발 2시간 전 도착" },
                    { time: "18:10", title: "귀국행 비행기", highlight: true, icon: "fa-plane-departure", desc: "칭다오 출발" }
                ]
            }
        };

        // --- MAP LOGIC ---
        let map, layerGroup;

        function initMap() {
            map = L.map('map').setView([LOCS.hotel.lat, LOCS.hotel.lng], 12);
            L.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png', {
                attribution: '&copy; OpenStreetMap & CartoDB',
                maxZoom: 19
            }).addTo(map);
            layerGroup = L.layerGroup().addTo(map);
            updateDay(1);
        }

        function updateDay(day) {
            const data = DAYS[day];

            // UI Updates
            document.querySelectorAll('.btn-day').forEach(b => b.classList.remove('active'));
            document.getElementById(`btn-${day}`).classList.add('active');
            document.getElementById('day-title').textContent = `Day ${day} 일정`;
            document.getElementById('info-card').innerHTML = `<p class="font-bold text-teal-800"><i class="fas fa-info-circle mr-2"></i>Day ${day} 전략</p><p class="mt-1 text-teal-700">${data.info}</p>`;

            // Map Updates
            layerGroup.clearLayers();

            if(data.lines) {
                data.lines.forEach(line => {
                    L.polyline(line.path.map(p => [p.lat, p.lng]), {
                        color: line.color, weight: 5, opacity: 0.7, dashArray: '5, 10'
                    }).addTo(layerGroup);
                });
            }

            data.markers.forEach(loc => {
                let color = '#0F766E';
                let icon = 'map-marker-alt';
                if (loc.title.includes('공항')) { color = '#DB2777'; icon = 'plane'; }
                if (loc.title.includes('호텔') || loc.title.includes('MGM')) { color = '#059669'; icon = 'hotel'; }
                if (loc.title.includes('맥주')) { color = '#D97706'; icon = 'beer'; }
                if (loc.title.includes('해수욕장') || loc.title.includes('잔교')) { color = '#3B82F6'; icon = 'umbrella-beach'; }
                if (loc.title.includes('해양')) { color = '#06B6D4'; icon = 'fish'; }
                if (loc.title.includes('쇼핑') || loc.title.includes('MIXC') || loc.title.includes('타이동')) { color = '#8B5CF6'; icon = 'shopping-bag'; }
                if (loc.title.includes('신호산')) { color = '#10B981'; icon = 'mountain'; }
                if (loc.title.includes('교당')) { color = '#F59E0B'; icon = 'church'; }
                if (loc.title.includes('광장')) { color = '#EF4444'; icon = 'building'; }

                const html = `<div style="background:${color}" class="w-8 h-8 rounded-full border-2 border-white shadow-lg flex items-center justify-center text-white text-sm"><i class="fas fa-${icon}"></i></div>`;
                L.marker([loc.lat, loc.lng], {
                    icon: L.divIcon({ html: html, className: 'bg-transparent', iconSize: [32, 32], iconAnchor: [16, 32], popupAnchor: [0, -32] })
                }).bindPopup(loc.title).addTo(layerGroup);
            });

            map.flyTo(data.center, data.zoom);

            // Timeline Updates
            const tl = document.getElementById('timeline');
            tl.innerHTML = '<div class="timeline-line"></div>';

            data.timeline.forEach((item, i) => {
                const el = document.createElement('div');
                el.className = "flex items-start mb-6 relative z-10";
                el.innerHTML = `
                    <div class="flex-shrink-0 w-10 h-10 bg-white border border-gray-200 rounded-full flex items-center justify-center text-gray-500 mr-4 shadow-sm z-10">
                        <i class="fas ${item.icon}"></i>
                    </div>
                    <div class="flex-grow bg-white p-4 rounded-lg border ${item.highlight ? 'border-amber-300 bg-amber-50' : 'border-gray-100'} shadow-sm">
                        <span class="time-badge ${item.highlight ? 'highlight' : ''} mb-1">${item.time}</span>
                        <h4 class="font-bold text-gray-800 text-sm mt-1">${item.title}</h4>
                        <p class="text-xs text-gray-600 mt-1">${item.desc}</p>
                    </div>
                `;
                tl.appendChild(el);
            });
        }

        window.onload = initMap;
    </script>
</body>
</html>
